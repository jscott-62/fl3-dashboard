<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Content Command Center</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=Source+Serif+4:ital,opsz,wght@0,8..60,300;0,8..60,400;0,8..60,600;1,8..60,400&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --cream: #F5F0E8;
    --warm-white: #FDFBF7;
    --parchment: #EDE6D8;
    --ink: #1A1A18;
    --ink-light: #3D3D38;
    --ink-muted: #8A8478;
    --terracotta: #C4613A;
    --terracotta-light: #D4815F;
    --terracotta-glow: rgba(196, 97, 58, 0.12);
    --sage: #6B7F5E;
    --sage-light: #8FA47E;
    --navy: #2C3E50;
    --gold: #B8860B;
    --gold-light: #D4A843;
    --border: rgba(26, 26, 24, 0.1);
    --border-strong: rgba(26, 26, 24, 0.2);
    --shadow-sm: 0 1px 3px rgba(26, 26, 24, 0.06);
    --shadow-md: 0 4px 16px rgba(26, 26, 24, 0.08);
    --shadow-lg: 0 8px 32px rgba(26, 26, 24, 0.1);
    --shadow-hover: 0 12px 40px rgba(26, 26, 24, 0.14);
    --radius: 6px;
    --radius-lg: 12px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--cream);
    color: var(--ink);
    min-height: 100vh;
    line-height: 1.6;
  }

  /* Subtle texture overlay */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%231A1A18' fill-opacity='0.02'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 0;
  }

  /* ── HEADER ── */
  .header {
    position: relative;
    background: var(--warm-white);
    border-bottom: 1px solid var(--border);
    padding: 2rem 3rem;
    z-index: 10;
  }

  .header-inner {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .header h1 {
    font-family: 'Playfair Display', serif;
    font-weight: 900;
    font-size: 2rem;
    letter-spacing: -0.02em;
    color: var(--ink);
  }

  .header h1 span {
    color: var(--terracotta);
    font-style: italic;
    font-weight: 400;
  }

  .header-stats {
    display: flex;
    gap: 2rem;
    align-items: baseline;
  }

  .stat {
    text-align: center;
  }

  .stat-number {
    font-family: 'Playfair Display', serif;
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--terracotta);
    line-height: 1;
  }

  .stat-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--ink-muted);
    margin-top: 0.2rem;
  }

  /* ── TOOLBAR ── */
  .toolbar {
    position: relative;
    z-index: 10;
    max-width: 1400px;
    margin: 0 auto;
    padding: 1.5rem 3rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .filter-tabs {
    display: flex;
    gap: 0.25rem;
    background: var(--warm-white);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 0.25rem;
  }

  .filter-tab {
    padding: 0.5rem 1rem;
    border: none;
    background: none;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--ink-muted);
    cursor: pointer;
    border-radius: 4px;
    transition: all 0.2s ease;
    letter-spacing: 0.02em;
  }

  .filter-tab:hover {
    color: var(--ink);
  }

  .filter-tab.active {
    background: var(--ink);
    color: var(--warm-white);
  }

  .btn-new-project {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.65rem 1.5rem;
    background: var(--terracotta);
    color: white;
    border: none;
    border-radius: var(--radius);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.25s ease;
    letter-spacing: 0.02em;
  }

  .btn-new-project:hover {
    background: var(--terracotta-light);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }

  .btn-new-project svg {
    width: 16px;
    height: 16px;
  }

  /* ── PROJECTS GRID ── */
  .projects-container {
    position: relative;
    z-index: 5;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 3rem 3rem;
  }

  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
    gap: 1.5rem;
  }

  /* ── PROJECT CARD ── */
  .project-card {
    background: var(--warm-white);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: all 0.3s ease;
    animation: cardEnter 0.4s ease backwards;
  }

  .project-card:hover {
    box-shadow: var(--shadow-hover);
    transform: translateY(-2px);
    border-color: var(--border-strong);
  }

  @keyframes cardEnter {
    from {
      opacity: 0;
      transform: translateY(16px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .card-accent {
    height: 4px;
    background: var(--terracotta);
  }

  .card-accent.type-blog { background: var(--terracotta); }
  .card-accent.type-youtube { background: var(--navy); }
  .card-accent.type-short-video { background: var(--sage); }
  .card-accent.type-fb-post { background: var(--gold); }

  .card-header {
    padding: 1.25rem 1.5rem 0.75rem;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1rem;
  }

  .card-title-group {
    flex: 1;
    min-width: 0;
  }

  .card-type-label {
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    font-weight: 700;
    margin-bottom: 0.35rem;
  }

  .type-blog .card-type-label { color: var(--terracotta); }
  .type-youtube .card-type-label { color: var(--navy); }
  .type-short-video .card-type-label { color: var(--sage); }
  .type-fb-post .card-type-label { color: var(--gold); }

  .card-title {
    font-family: 'Source Serif 4', serif;
    font-size: 1.15rem;
    font-weight: 600;
    line-height: 1.35;
    color: var(--ink);
    word-break: break-word;
  }

  .card-actions {
    display: flex;
    gap: 0.25rem;
    flex-shrink: 0;
  }

  .card-action-btn {
    width: 30px;
    height: 30px;
    border: none;
    background: none;
    color: var(--ink-muted);
    cursor: pointer;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }

  .card-action-btn:hover {
    background: var(--parchment);
    color: var(--ink);
  }

  .card-action-btn.delete:hover {
    background: #fde8e8;
    color: #c53030;
  }

  .card-action-btn svg {
    width: 14px;
    height: 14px;
  }

  /* Deadline */
  .card-deadline {
    padding: 0 1.5rem;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.75rem;
    color: var(--ink-muted);
  }

  .card-deadline svg {
    width: 13px;
    height: 13px;
    opacity: 0.6;
  }

  .card-deadline.overdue {
    color: #c53030;
  }

  .card-deadline.overdue svg {
    opacity: 1;
  }

  /* Progress bar */
  .card-progress {
    padding: 0 1.5rem;
    margin-bottom: 1rem;
  }

  .progress-info {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 0.4rem;
  }

  .progress-text {
    font-size: 0.7rem;
    color: var(--ink-muted);
    letter-spacing: 0.02em;
  }

  .progress-pct {
    font-family: 'Playfair Display', serif;
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--ink-light);
  }

  .progress-bar {
    height: 5px;
    background: var(--parchment);
    border-radius: 10px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    border-radius: 10px;
    transition: width 0.5s ease;
    background: var(--terracotta);
  }

  .type-youtube .progress-fill { background: var(--navy); }
  .type-short-video .progress-fill { background: var(--sage); }
  .type-fb-post .progress-fill { background: var(--gold); }

  .progress-fill.complete {
    background: var(--sage) !important;
  }

  /* Checklist */
  .card-checklist {
    padding: 0 1.5rem 1.25rem;
    list-style: none;
  }

  .checklist-item {
    display: flex;
    align-items: center;
    gap: 0.65rem;
    padding: 0.45rem 0;
    border-bottom: 1px solid var(--border);
    transition: all 0.2s;
    cursor: pointer;
  }

  .checklist-item:last-child {
    border-bottom: none;
  }

  .checklist-item:hover {
    padding-left: 0.3rem;
  }

  .check-box {
    width: 18px;
    height: 18px;
    border: 2px solid var(--border-strong);
    border-radius: 4px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.25s ease;
    cursor: pointer;
  }

  .check-box svg {
    width: 11px;
    height: 11px;
    opacity: 0;
    transform: scale(0.5);
    transition: all 0.2s ease;
    stroke: white;
    stroke-width: 3;
    fill: none;
  }

  .checklist-item.done .check-box {
    background: var(--sage);
    border-color: var(--sage);
  }

  .checklist-item.done .check-box svg {
    opacity: 1;
    transform: scale(1);
  }

  .check-label {
    font-size: 0.85rem;
    color: var(--ink-light);
    transition: all 0.2s;
    font-weight: 400;
  }

  .checklist-item.done .check-label {
    text-decoration: line-through;
    color: var(--ink-muted);
    opacity: 0.6;
  }

  /* ── MODAL ── */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(26, 26, 24, 0.45);
    backdrop-filter: blur(4px);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.2s ease;
  }

  .modal-overlay.open {
    display: flex;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .modal {
    background: var(--warm-white);
    border-radius: var(--radius-lg);
    width: 90%;
    max-width: 500px;
    box-shadow: var(--shadow-lg);
    animation: modalSlide 0.3s ease;
    overflow: hidden;
  }

  @keyframes modalSlide {
    from { opacity: 0; transform: translateY(20px) scale(0.97); }
    to { opacity: 1; transform: translateY(0) scale(1); }
  }

  .modal-header {
    padding: 1.5rem 1.75rem 1rem;
    border-bottom: 1px solid var(--border);
  }

  .modal-header h2 {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem;
    font-weight: 700;
  }

  .modal-body {
    padding: 1.25rem 1.75rem 1.75rem;
    display: flex;
    flex-direction: column;
    gap: 1.1rem;
  }

  .form-group label {
    display: block;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-weight: 600;
    color: var(--ink-muted);
    margin-bottom: 0.4rem;
  }

  .form-group input,
  .form-group select {
    width: 100%;
    padding: 0.7rem 0.9rem;
    border: 1px solid var(--border-strong);
    border-radius: var(--radius);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.9rem;
    color: var(--ink);
    background: white;
    transition: border-color 0.2s;
    outline: none;
  }

  .form-group input:focus,
  .form-group select:focus {
    border-color: var(--terracotta);
    box-shadow: 0 0 0 3px var(--terracotta-glow);
  }

  .modal-actions {
    display: flex;
    gap: 0.75rem;
    justify-content: flex-end;
    padding-top: 0.5rem;
  }

  .btn-cancel {
    padding: 0.6rem 1.25rem;
    border: 1px solid var(--border-strong);
    background: none;
    border-radius: var(--radius);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.85rem;
    color: var(--ink-muted);
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-cancel:hover {
    background: var(--parchment);
    color: var(--ink);
  }

  .btn-create {
    padding: 0.6rem 1.75rem;
    border: none;
    background: var(--terracotta);
    color: white;
    border-radius: var(--radius);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-create:hover {
    background: var(--terracotta-light);
  }

  /* ── EMPTY STATE ── */
  .empty-state {
    text-align: center;
    padding: 5rem 2rem;
    grid-column: 1 / -1;
  }

  .empty-state-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    opacity: 0.3;
  }

  .empty-state h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--ink-light);
    margin-bottom: 0.5rem;
  }

  .empty-state p {
    color: var(--ink-muted);
    font-size: 0.9rem;
  }

  /* ── RESPONSIVE ── */
  @media (max-width: 768px) {
    .header { padding: 1.5rem 1.25rem; }
    .header h1 { font-size: 1.5rem; }
    .toolbar { padding: 1rem 1.25rem; }
    .projects-container { padding: 0 1.25rem 2rem; }
    .projects-grid { grid-template-columns: 1fr; }
    .header-stats { gap: 1.25rem; }
    .filter-tabs { overflow-x: auto; }
  }

  /* ── CONFIRM DELETE MODAL ── */
  .confirm-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(26, 26, 24, 0.45);
    backdrop-filter: blur(4px);
    z-index: 1100;
    align-items: center;
    justify-content: center;
  }

  .confirm-overlay.open { display: flex; }

  .confirm-box {
    background: var(--warm-white);
    border-radius: var(--radius-lg);
    padding: 2rem;
    max-width: 400px;
    width: 90%;
    box-shadow: var(--shadow-lg);
    text-align: center;
    animation: modalSlide 0.3s ease;
  }

  .confirm-box h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
  }

  .confirm-box p {
    font-size: 0.9rem;
    color: var(--ink-muted);
    margin-bottom: 1.5rem;
  }

  .confirm-actions {
    display: flex;
    gap: 0.75rem;
    justify-content: center;
  }

  .btn-delete-confirm {
    padding: 0.6rem 1.5rem;
    border: none;
    background: #c53030;
    color: white;
    border-radius: var(--radius);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-delete-confirm:hover { background: #e53e3e; }

  /* ── PUBLISH PLATFORMS (Blog cards) ── */
  .publish-platforms {
    padding: 0 1.5rem 1.25rem;
    border-top: 1px dashed var(--border-strong);
    margin-top: 0.25rem;
    padding-top: 0.9rem;
  }

  .publish-platforms-label {
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    font-weight: 700;
    color: var(--ink-muted);
    margin-bottom: 0.6rem;
  }

  .platform-list {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .platform-chip {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.35rem 0.75rem;
    border: 1.5px solid var(--border-strong);
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--ink-muted);
    cursor: pointer;
    transition: all 0.25s ease;
    user-select: none;
    background: transparent;
  }

  .platform-chip:hover {
    border-color: var(--terracotta-light);
    color: var(--ink-light);
  }

  .platform-chip.published {
    background: var(--terracotta-glow);
    border-color: var(--terracotta);
    color: var(--terracotta);
    font-weight: 600;
  }

  .platform-chip svg {
    width: 12px;
    height: 12px;
    flex-shrink: 0;
  }

  .platform-chip .chip-check {
    width: 14px;
    height: 14px;
    border: 1.5px solid var(--border-strong);
    border-radius: 3px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    flex-shrink: 0;
  }

  .platform-chip .chip-check svg {
    width: 9px;
    height: 9px;
    opacity: 0;
    stroke: white;
    stroke-width: 3;
    fill: none;
    transition: all 0.2s ease;
  }

  .platform-chip.published .chip-check {
    background: var(--terracotta);
    border-color: var(--terracotta);
  }

  .platform-chip.published .chip-check svg {
    opacity: 1;
  }

  /* ── VIEW TOGGLE ── */
  .view-toggle {
    display: flex;
    gap: 0.25rem;
    background: var(--warm-white);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 0.25rem;
  }

  .view-btn {
    padding: 0.45rem 0.75rem;
    border: none;
    background: none;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--ink-muted);
    cursor: pointer;
    border-radius: 4px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.4rem;
  }

  .view-btn:hover { color: var(--ink); }

  .view-btn.active {
    background: var(--ink);
    color: var(--warm-white);
  }

  .view-btn svg {
    width: 14px;
    height: 14px;
  }

  .toolbar-right {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  /* ── PIPELINE VIEW ── */
  .pipeline-container {
    position: relative;
    z-index: 5;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 3rem 3rem;
    display: none;
  }

  .pipeline-container.active { display: block; }
  .projects-container.active { display: block; }
  .projects-container.hidden { display: none; }

  .pipeline-section {
    margin-bottom: 2rem;
    animation: cardEnter 0.4s ease backwards;
  }

  .pipeline-section-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
    padding-bottom: 0.6rem;
    border-bottom: 2px solid var(--border);
  }

  .pipeline-section-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .pipeline-section-dot.type-blog { background: var(--terracotta); }
  .pipeline-section-dot.type-youtube { background: var(--navy); }
  .pipeline-section-dot.type-short-video { background: var(--sage); }
  .pipeline-section-dot.type-fb-post { background: var(--gold); }

  .pipeline-section-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--ink);
  }

  .pipeline-section-count {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--ink-muted);
    font-weight: 600;
  }

  /* Pipeline Row */
  .pipeline-row {
    background: var(--warm-white);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 1.25rem 1.5rem;
    margin-bottom: 0.75rem;
    transition: all 0.3s ease;
    animation: cardEnter 0.35s ease backwards;
  }

  .pipeline-row:hover {
    box-shadow: var(--shadow-md);
    border-color: var(--border-strong);
  }

  .pipeline-row-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .pipeline-row-info {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex: 1;
    min-width: 0;
  }

  .pipeline-row-title {
    font-family: 'Source Serif 4', serif;
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--ink);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .pipeline-row-deadline {
    font-size: 0.7rem;
    color: var(--ink-muted);
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }

  .pipeline-row-deadline svg {
    width: 11px;
    height: 11px;
    opacity: 0.5;
  }

  .pipeline-row-deadline.overdue {
    color: #c53030;
    font-weight: 600;
  }

  .pipeline-row-deadline.overdue svg { opacity: 1; }

  .pipeline-row-pct {
    font-family: 'Playfair Display', serif;
    font-size: 1rem;
    font-weight: 700;
    color: var(--ink-light);
    white-space: nowrap;
  }

  .pipeline-row-pct.complete {
    color: var(--sage);
  }

  /* The track */
  .pipeline-track {
    display: flex;
    align-items: stretch;
    gap: 3px;
    position: relative;
  }

  .pipeline-step {
    flex: 1;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.35rem;
  }

  .pipeline-step-bar {
    width: 100%;
    height: 28px;
    border-radius: 4px;
    background: var(--parchment);
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .pipeline-step-bar:hover {
    transform: scaleY(1.1);
  }

  .pipeline-step-bar.done {
    background: var(--terracotta);
  }

  .pipeline-step-bar.current {
    background: var(--parchment);
    border: 2px solid var(--terracotta);
    animation: currentPulse 2s ease-in-out infinite;
  }

  .type-youtube .pipeline-step-bar.done { background: var(--navy); }
  .type-youtube .pipeline-step-bar.current { border-color: var(--navy); }
  .type-short-video .pipeline-step-bar.done { background: var(--sage); }
  .type-short-video .pipeline-step-bar.current { border-color: var(--sage); }
  .type-fb-post .pipeline-step-bar.done { background: var(--gold); }
  .type-fb-post .pipeline-step-bar.current { border-color: var(--gold); }

  .pipeline-step-bar.all-done {
    background: var(--sage) !important;
  }

  @keyframes currentPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }

  .pipeline-step-bar .step-check {
    width: 14px;
    height: 14px;
    stroke: white;
    stroke-width: 3;
    fill: none;
    opacity: 0;
    transition: opacity 0.2s;
  }

  .pipeline-step-bar.done .step-check {
    opacity: 0.9;
  }

  .pipeline-step-bar.current .step-current-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--terracotta);
  }

  .type-youtube .pipeline-step-bar.current .step-current-dot { background: var(--navy); }
  .type-short-video .pipeline-step-bar.current .step-current-dot { background: var(--sage); }
  .type-fb-post .pipeline-step-bar.current .step-current-dot { background: var(--gold); }

  .pipeline-step-label {
    font-size: 0.6rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--ink-muted);
    text-align: center;
    line-height: 1.2;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
  }

  .pipeline-step-label.done-label {
    color: var(--ink-light);
    font-weight: 600;
  }

  .pipeline-step-label.current-label {
    color: var(--terracotta);
    font-weight: 700;
  }

  .type-youtube .pipeline-step-label.current-label { color: var(--navy); }
  .type-short-video .pipeline-step-label.current-label { color: var(--sage); }
  .type-fb-post .pipeline-step-label.current-label { color: var(--gold); }

  /* Pipeline empty */
  .pipeline-empty {
    text-align: center;
    padding: 4rem 2rem;
  }

  .pipeline-empty h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--ink-light);
    margin-bottom: 0.5rem;
  }

  .pipeline-empty p {
    color: var(--ink-muted);
    font-size: 0.9rem;
  }

  @media (max-width: 768px) {
    .pipeline-container { padding: 0 1.25rem 2rem; }
    .pipeline-step-label { font-size: 0.5rem; }
    .pipeline-step-bar { height: 22px; }
    .pipeline-row-top { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
    .toolbar-right { flex-wrap: wrap; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<header class="header">
  <div class="header-inner">
    <h1>Content <span>Command</span> Center</h1>
    <div class="header-stats">
      <div class="stat">
        <div class="stat-number" id="statActive">0</div>
        <div class="stat-label">Active</div>
      </div>
      <div class="stat">
        <div class="stat-number" id="statCompleted">0</div>
        <div class="stat-label">Completed</div>
      </div>
      <div class="stat">
        <div class="stat-number" id="statTotal">0</div>
        <div class="stat-label">Total</div>
      </div>
    </div>
  </div>
</header>

<!-- TOOLBAR -->
<div class="toolbar">
  <div class="filter-tabs">
    <button class="filter-tab active" data-filter="all">All</button>
    <button class="filter-tab" data-filter="blog">Blog</button>
    <button class="filter-tab" data-filter="youtube">YouTube</button>
    <button class="filter-tab" data-filter="short-video">Short Video</button>
    <button class="filter-tab" data-filter="fb-post">FB Post</button>
  </div>
  <div class="toolbar-right">
    <div class="view-toggle">
      <button class="view-btn active" data-view="cards" onclick="switchView('cards')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
        Cards
      </button>
      <button class="view-btn" data-view="pipeline" onclick="switchView('pipeline')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/><circle cx="8" cy="6" r="2" fill="currentColor"/><circle cx="16" cy="12" r="2" fill="currentColor"/><circle cx="11" cy="18" r="2" fill="currentColor"/></svg>
        Pipeline
      </button>
    </div>
    <button class="btn-new-project" onclick="openModal()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
      New Project
    </button>
  </div>
</div>

<!-- PROJECTS: Cards View -->
<div class="projects-container active" id="cardsView">
  <div class="projects-grid" id="projectsGrid"></div>
</div>

<!-- PROJECTS: Pipeline View -->
<div class="pipeline-container" id="pipelineView"></div>

<!-- NEW PROJECT MODAL -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <div class="modal-header">
      <h2>New Project</h2>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label>Project Title</label>
        <input type="text" id="projectTitle" placeholder="What are you creating?" autocomplete="off">
      </div>
      <div class="form-group">
        <label>Content Type</label>
        <select id="projectType">
          <option value="blog">Long-form Blog Post</option>
          <option value="youtube">Long-form YouTube Video</option>
          <option value="short-video">Short-form Video (IG/FB)</option>
          <option value="fb-post">Personal FB Post</option>
        </select>
      </div>
      <div class="form-group">
        <label>Target Publish Date</label>
        <input type="date" id="projectDeadline">
      </div>
      <div class="modal-actions">
        <button class="btn-cancel" onclick="closeModal()">Cancel</button>
        <button class="btn-create" onclick="createProject()">Create Project</button>
      </div>
    </div>
  </div>
</div>

<!-- CONFIRM DELETE -->
<div class="confirm-overlay" id="confirmOverlay">
  <div class="confirm-box">
    <h3>Delete this project?</h3>
    <p>This action cannot be undone.</p>
    <div class="confirm-actions">
      <button class="btn-cancel" onclick="closeConfirm()">Cancel</button>
      <button class="btn-delete-confirm" id="confirmDeleteBtn">Delete</button>
    </div>
  </div>
</div>

<script>
// ── PUBLISH PLATFORMS (Blog only) ──
const BLOG_PLATFORMS = [
  { key: 'medium', label: 'Medium', icon: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M13.54 12a6.8 6.8 0 01-6.77 6.82A6.8 6.8 0 010 12a6.8 6.8 0 016.77-6.82A6.8 6.8 0 0113.54 12zm7.42 0c0 3.54-1.51 6.42-3.38 6.42S14.2 15.54 14.2 12s1.51-6.42 3.38-6.42 3.38 2.88 3.38 6.42zm2.94 0c0 3.17-.53 5.75-1.19 5.75-.66 0-1.19-2.58-1.19-5.75s.53-5.75 1.19-5.75c.66 0 1.19 2.58 1.19 5.75z"/></svg>' },
  { key: 'linkedin', label: 'LinkedIn', icon: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>' },
  { key: 'website', label: 'Website', icon: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>' }
];

// ── CONTENT TYPE DEFINITIONS ──
const CONTENT_TYPES = {
  blog: {
    label: 'Long-form Blog Post',
    shortLabel: 'Blog Post',
    steps: ['Research', 'Create', 'Publish']
  },
  youtube: {
    label: 'Long-form YouTube Video',
    shortLabel: 'YouTube Video',
    steps: ['Script', 'Record', 'Edit', 'Thumbnail', 'Upload', 'Optimize', 'Publish', 'Promote']
  },
  'short-video': {
    label: 'Short-form Video (IG/FB)',
    shortLabel: 'Short Video',
    steps: ['Concept', 'Script', 'Record', 'Edit', 'Captions', 'Post IG', 'Post FB']
  },
  'fb-post': {
    label: 'Personal FB Post',
    shortLabel: 'FB Post',
    steps: ['Draft', 'Edit', 'Post']
  }
};

// ── DATA ──
const STORAGE_KEY = 'contentCommandCenter';

function loadProjects() {
  try {
    return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
  } catch {
    return [];
  }
}

function saveProjects(projects) {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(projects));
}

let projects = loadProjects();

// ── RENDER ──
function render(filter = 'all') {
  const grid = document.getElementById('projectsGrid');
  const filtered = filter === 'all' ? projects : projects.filter(p => p.type === filter);

  // Stats
  const completedProjects = projects.filter(p => {
    const total = p.tasks.length;
    const done = p.tasks.filter(t => t.done).length;
    return total > 0 && done === total;
  });
  document.getElementById('statActive').textContent = projects.length - completedProjects.length;
  document.getElementById('statCompleted').textContent = completedProjects.length;
  document.getElementById('statTotal').textContent = projects.length;

  if (filtered.length === 0) {
    grid.innerHTML = `
      <div class="empty-state">
        <div class="empty-state-icon">&#9998;</div>
        <h3>${filter === 'all' ? 'No projects yet' : 'No ' + (CONTENT_TYPES[filter]?.shortLabel || filter) + ' projects'}</h3>
        <p>Click "New Project" to get started.</p>
      </div>
    `;
    return;
  }

  grid.innerHTML = filtered.map((project, idx) => {
    const realIdx = projects.indexOf(project);
    const typeDef = CONTENT_TYPES[project.type];
    const totalTasks = project.tasks.length;
    const doneTasks = project.tasks.filter(t => t.done).length;
    const pct = totalTasks > 0 ? Math.round((doneTasks / totalTasks) * 100) : 0;
    const isComplete = pct === 100;

    let deadlineHTML = '';
    if (project.deadline) {
      const dl = new Date(project.deadline + 'T00:00:00');
      const now = new Date();
      now.setHours(0,0,0,0);
      const isOverdue = dl < now && !isComplete;
      const formatted = dl.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      deadlineHTML = `
        <div class="card-deadline ${isOverdue ? 'overdue' : ''}">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
          ${isOverdue ? 'Overdue: ' : ''}${formatted}
        </div>
      `;
    }

    const checklistHTML = project.tasks.map((task, tIdx) => `
      <li class="checklist-item ${task.done ? 'done' : ''}" onclick="toggleTask(${realIdx}, ${tIdx})">
        <div class="check-box">
          <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <span class="check-label">${task.name}</span>
      </li>
    `).join('');

    // Publish platform chips (blog only)
    let platformsHTML = '';
    if (project.type === 'blog') {
      // Ensure publishedOn exists for older projects
      if (!project.publishedOn) {
        project.publishedOn = { medium: false, linkedin: false, website: false };
      }
      const chips = BLOG_PLATFORMS.map(p => {
        const isPublished = project.publishedOn[p.key] || false;
        return `
          <div class="platform-chip ${isPublished ? 'published' : ''}" onclick="event.stopPropagation(); togglePlatform(${realIdx}, '${p.key}')">
            <span class="chip-check">
              <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>
            </span>
            ${p.icon}
            ${p.label}
          </div>
        `;
      }).join('');

      const publishedCount = BLOG_PLATFORMS.filter(p => project.publishedOn[p.key]).length;
      platformsHTML = `
        <div class="publish-platforms">
          <div class="publish-platforms-label">Published On ${publishedCount > 0 ? '(' + publishedCount + '/3)' : ''}</div>
          <div class="platform-list">${chips}</div>
        </div>
      `;
    }

    return `
      <div class="project-card type-${project.type}" style="animation-delay: ${idx * 0.06}s">
        <div class="card-accent type-${project.type}"></div>
        <div class="card-header">
          <div class="card-title-group">
            <div class="card-type-label">${typeDef?.shortLabel || project.type}</div>
            <div class="card-title">${escapeHTML(project.title)}</div>
          </div>
          <div class="card-actions">
            <button class="card-action-btn delete" title="Delete project" onclick="event.stopPropagation(); confirmDelete(${realIdx})">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14a2 2 0 01-2 2H8a2 2 0 01-2-2L5 6"/><path d="M10 11v6"/><path d="M14 11v6"/><path d="M9 6V4a1 1 0 011-1h4a1 1 0 011 1v2"/></svg>
            </button>
          </div>
        </div>
        ${deadlineHTML}
        <div class="card-progress">
          <div class="progress-info">
            <span class="progress-text">${doneTasks} of ${totalTasks} steps</span>
            <span class="progress-pct">${pct}%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill ${isComplete ? 'complete' : ''}" style="width: ${pct}%"></div>
          </div>
        </div>
        <ul class="card-checklist">${checklistHTML}</ul>
        ${platformsHTML}
      </div>
    `;
  }).join('');
}

function escapeHTML(str) {
  const div = document.createElement('div');
  div.textContent = str;
  return div.innerHTML;
}

// ── TASK TOGGLE ──
function toggleTask(projectIdx, taskIdx) {
  projects[projectIdx].tasks[taskIdx].done = !projects[projectIdx].tasks[taskIdx].done;
  saveProjects(projects);
  renderAll();
}

// ── PLATFORM TOGGLE (Blog publish tracking) ──
function togglePlatform(projectIdx, platformKey) {
  const project = projects[projectIdx];
  if (!project.publishedOn) {
    project.publishedOn = { medium: false, linkedin: false, website: false };
  }
  project.publishedOn[platformKey] = !project.publishedOn[platformKey];
  saveProjects(projects);
  renderAll();
}

// ── MODAL ──
function openModal() {
  document.getElementById('modalOverlay').classList.add('open');
  document.getElementById('projectTitle').value = '';
  document.getElementById('projectDeadline').value = '';
  document.getElementById('projectType').value = 'blog';
  setTimeout(() => document.getElementById('projectTitle').focus(), 100);
}

function closeModal() {
  document.getElementById('modalOverlay').classList.remove('open');
}

function createProject() {
  const title = document.getElementById('projectTitle').value.trim();
  const type = document.getElementById('projectType').value;
  const deadline = document.getElementById('projectDeadline').value;

  if (!title) {
    document.getElementById('projectTitle').focus();
    return;
  }

  const typeDef = CONTENT_TYPES[type];
  const tasks = typeDef.steps.map(step => ({ name: step, done: false }));

  // Initialize publishedOn for blog projects
  const publishedOn = type === 'blog'
    ? { medium: false, linkedin: false, website: false }
    : null;

  projects.unshift({
    id: Date.now().toString(),
    title,
    type,
    deadline: deadline || null,
    tasks,
    publishedOn,
    createdAt: new Date().toISOString()
  });

  saveProjects(projects);
  closeModal();
  renderAll();
}

// ── DELETE ──
let deleteTargetIdx = null;

function confirmDelete(idx) {
  deleteTargetIdx = idx;
  document.getElementById('confirmOverlay').classList.add('open');
}

function closeConfirm() {
  deleteTargetIdx = null;
  document.getElementById('confirmOverlay').classList.remove('open');
}

document.getElementById('confirmDeleteBtn').addEventListener('click', () => {
  if (deleteTargetIdx !== null) {
    projects.splice(deleteTargetIdx, 1);
    saveProjects(projects);
    closeConfirm();
    renderAll();
  }
});

// ── VIEW SWITCHING ──
let currentView = 'cards';

function switchView(view) {
  currentView = view;
  document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
  document.querySelector(`.view-btn[data-view="${view}"]`).classList.add('active');

  const cardsView = document.getElementById('cardsView');
  const pipelineView = document.getElementById('pipelineView');

  if (view === 'cards') {
    cardsView.classList.add('active');
    cardsView.classList.remove('hidden');
    pipelineView.classList.remove('active');
  } else {
    cardsView.classList.remove('active');
    cardsView.classList.add('hidden');
    pipelineView.classList.add('active');
  }

  renderAll();
}

function renderAll() {
  const filter = getCurrentFilter();
  render(filter);
  renderPipeline(filter);
}

// ── PIPELINE RENDER ──
function renderPipeline(filter = 'all') {
  const container = document.getElementById('pipelineView');
  const filtered = filter === 'all' ? projects : projects.filter(p => p.type === filter);

  if (filtered.length === 0) {
    container.innerHTML = `
      <div class="pipeline-empty">
        <h3>${filter === 'all' ? 'No projects yet' : 'No ' + (CONTENT_TYPES[filter]?.shortLabel || filter) + ' projects'}</h3>
        <p>Click "New Project" to get started.</p>
      </div>
    `;
    return;
  }

  // Group by content type
  const grouped = {};
  const typeOrder = ['blog', 'youtube', 'short-video', 'fb-post'];

  filtered.forEach(project => {
    if (!grouped[project.type]) grouped[project.type] = [];
    grouped[project.type].push(project);
  });

  let html = '';

  typeOrder.forEach(type => {
    if (!grouped[type]) return;
    const typeDef = CONTENT_TYPES[type];
    const typeProjects = grouped[type];

    html += `
      <div class="pipeline-section" style="animation-delay: ${typeOrder.indexOf(type) * 0.08}s">
        <div class="pipeline-section-header">
          <div class="pipeline-section-dot type-${type}"></div>
          <div class="pipeline-section-title">${typeDef.label}</div>
          <div class="pipeline-section-count">${typeProjects.length} project${typeProjects.length !== 1 ? 's' : ''}</div>
        </div>
    `;

    typeProjects.forEach((project, pIdx) => {
      const realIdx = projects.indexOf(project);
      const totalTasks = project.tasks.length;
      const doneTasks = project.tasks.filter(t => t.done).length;
      const pct = totalTasks > 0 ? Math.round((doneTasks / totalTasks) * 100) : 0;
      const isComplete = pct === 100;

      // Find current step (first undone task)
      const currentStepIdx = project.tasks.findIndex(t => !t.done);

      // Deadline
      let deadlineHTML = '';
      if (project.deadline) {
        const dl = new Date(project.deadline + 'T00:00:00');
        const now = new Date();
        now.setHours(0,0,0,0);
        const isOverdue = dl < now && !isComplete;
        const formatted = dl.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        deadlineHTML = `
          <div class="pipeline-row-deadline ${isOverdue ? 'overdue' : ''}">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
            ${isOverdue ? 'Overdue' : formatted}
          </div>
        `;
      }

      // Build step bars
      const stepsHTML = project.tasks.map((task, tIdx) => {
        const isDone = task.done;
        const isCurrent = tIdx === currentStepIdx;
        let barClass = '';
        if (isComplete) barClass = 'done all-done';
        else if (isDone) barClass = 'done';
        else if (isCurrent) barClass = 'current';

        const labelClass = isComplete ? 'done-label' : isDone ? 'done-label' : isCurrent ? 'current-label' : '';

        const innerContent = isDone
          ? '<svg class="step-check" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>'
          : isCurrent
            ? '<div class="step-current-dot"></div>'
            : '';

        return `
          <div class="pipeline-step">
            <div class="pipeline-step-bar ${barClass}" onclick="toggleTask(${realIdx}, ${tIdx})" title="${task.name}: ${isDone ? 'Done' : isCurrent ? 'In Progress' : 'Pending'}">
              ${innerContent}
            </div>
            <div class="pipeline-step-label ${labelClass}">${task.name}</div>
          </div>
        `;
      }).join('');

      html += `
        <div class="pipeline-row type-${project.type}" style="animation-delay: ${pIdx * 0.05}s">
          <div class="pipeline-row-top">
            <div class="pipeline-row-info">
              <div class="pipeline-row-title">${escapeHTML(project.title)}</div>
              ${deadlineHTML}
            </div>
            <div class="pipeline-row-pct ${isComplete ? 'complete' : ''}">${isComplete ? '✓ Done' : pct + '%'}</div>
          </div>
          <div class="pipeline-track">${stepsHTML}</div>
        </div>
      `;
    });

    html += '</div>';
  });

  container.innerHTML = html;
}

// ── FILTERS ──
function getCurrentFilter() {
  const active = document.querySelector('.filter-tab.active');
  return active ? active.dataset.filter : 'all';
}

document.querySelectorAll('.filter-tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    renderAll();
  });
});

// ── KEYBOARD SHORTCUTS ──
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    closeModal();
    closeConfirm();
  }
  if (e.key === 'Enter' && document.getElementById('modalOverlay').classList.contains('open')) {
    createProject();
  }
});

// Click outside to close
document.getElementById('modalOverlay').addEventListener('click', (e) => {
  if (e.target === e.currentTarget) closeModal();
});
document.getElementById('confirmOverlay').addEventListener('click', (e) => {
  if (e.target === e.currentTarget) closeConfirm();
});

// ── INIT ──
renderAll();
</script>

</body>
</html>
